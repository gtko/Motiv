---
import Layout from '../layouts/Layout.astro';
import Leaderboard from '../components/Leaderboard';

const topUsers = [
  {
    position: 1,
    user: { id: '1', name: 'Marie Dubois', avatar: null },
    totalPoints: 12850,
    projectCount: 15,
    trend: 'up' as const,
    badges: ['🏆', '⚡', '🎯', '🔥'],
    recentActivity: '2 heures',
    monthlyGain: 2340
  },
  {
    position: 2,
    user: { id: '2', name: 'Jean Martin', avatar: null },
    totalPoints: 11340,
    projectCount: 12,
    trend: 'stable' as const,
    badges: ['💎', '🚀', '⭐'],
    recentActivity: '5 heures',
    monthlyGain: 1890
  },
  {
    position: 3,
    user: { id: '3', name: 'Sophie Bernard', avatar: null },
    totalPoints: 10890,
    projectCount: 14,
    trend: 'up' as const,
    badges: ['🎨', '💡', '🏅'],
    recentActivity: '1 jour',
    monthlyGain: 3210
  },
  {
    position: 4,
    user: { id: '4', name: 'Thomas Petit', avatar: null },
    totalPoints: 9560,
    projectCount: 10,
    trend: 'down' as const,
    badges: ['🛠️', '📈'],
    recentActivity: '3 jours',
    monthlyGain: 980
  },
  {
    position: 5,
    user: { id: '5', name: 'Emma Rousseau', avatar: null },
    totalPoints: 8230,
    projectCount: 11,
    trend: 'up' as const,
    badges: ['🌟', '🎯', '💪'],
    recentActivity: '6 heures',
    monthlyGain: 2100
  },
  {
    position: 6,
    user: { id: '6', name: 'Lucas Moreau', avatar: null },
    totalPoints: 7890,
    projectCount: 9,
    trend: 'up' as const,
    badges: ['🚀', '⚡'],
    recentActivity: '2 jours',
    monthlyGain: 1650
  },
  {
    position: 7,
    user: { id: '7', name: 'Léa Garcia', avatar: null },
    totalPoints: 7120,
    projectCount: 8,
    trend: 'stable' as const,
    badges: ['🎨', '💎'],
    recentActivity: '12 heures',
    monthlyGain: 1200
  },
  {
    position: 8,
    user: { id: '8', name: 'Antoine Lefebvre', avatar: null },
    totalPoints: 6540,
    projectCount: 7,
    trend: 'down' as const,
    badges: ['📈'],
    recentActivity: '4 jours',
    monthlyGain: 450
  },
  {
    position: 9,
    user: { id: '9', name: 'Camille Dupont', avatar: null },
    totalPoints: 5980,
    projectCount: 8,
    trend: 'up' as const,
    badges: ['🌟', '🏅'],
    recentActivity: '1 jour',
    monthlyGain: 1780
  },
  {
    position: 10,
    user: { id: '10', name: 'Maxime Robert', avatar: null },
    totalPoints: 5230,
    projectCount: 6,
    trend: 'stable' as const,
    badges: ['💡'],
    recentActivity: '3 heures',
    monthlyGain: 890
  }
];

const categories = [
  { name: 'Global', icon: '🌍', active: true },
  { name: 'Mensuel', icon: '📅', active: false },
  { name: 'Hebdomadaire', icon: '📊', active: false },
  { name: 'Projets SaaS', icon: '💼', active: false },
  { name: 'Jeux', icon: '🎮', active: false },
  { name: 'Open Source', icon: '🔓', active: false }
];

const achievements = [
  { name: 'First Place', icon: '🥇', description: 'Finir 1er du classement global', rarity: 'Légendaire' },
  { name: 'Streak Master', icon: '🔥', description: '30 jours d\'activité consécutive', rarity: 'Épique' },
  { name: 'Project Champion', icon: '🏆', description: '10 projets avec +1000 points', rarity: 'Épique' },
  { name: 'Community Hero', icon: '🦸', description: 'Aider 50 autres créateurs', rarity: 'Rare' }
];
---

<Layout title="Classement">
  <!-- Hero Section -->
  <section class="relative min-h-[40vh] flex items-center justify-center bg-white">
    <div class="absolute inset-0">
      <div class="absolute inset-0 bg-gradient-to-br from-neutral-50 via-white to-primary-50/30"></div>
      
      <!-- Simple geometric shapes -->
      <div class="absolute top-1/4 left-1/3 w-64 h-64 bg-primary-100 rounded-full opacity-20"></div>
      <div class="absolute bottom-1/4 right-1/3 w-48 h-48 bg-accent-100 rounded-full opacity-20"></div>
    </div>
    
    <div class="relative z-10 max-w-4xl mx-auto px-6 text-center">
      <h1 class="text-5xl md:text-6xl lg:text-7xl font-black mb-6 text-neutral-800">
        Classement Global
      </h1>
      <p class="text-xl md:text-2xl text-neutral-600">
        Les créateurs les plus actifs et innovants de notre communauté
      </p>
    </div>
  </section>

  <!-- Categories Tabs -->
  <section class="py-8 sticky top-20 z-40 bg-white/90 backdrop-blur-sm border-b border-neutral-200">
    <div class="max-w-7xl mx-auto px-6">
      <div class="flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide">
        {categories.map((category) => (
          <button class={`flex items-center gap-2 px-6 py-3 rounded-full text-sm font-medium whitespace-nowrap transition-all ${
            category.active 
              ? 'bg-primary-500 text-white shadow-soft' 
              : 'bg-white border border-neutral-200 text-neutral-600 hover:bg-neutral-50'
          }`}>
            <span class="text-lg">{category.icon}</span>
            {category.name}
          </button>
        ))}
      </div>
    </div>
  </section>

  <!-- Top 3 Podium -->
  <section class="py-16 -mt-8">
    <div class="max-w-6xl mx-auto px-6">
      <div class="grid grid-cols-3 gap-4 items-end mb-16">
        <!-- 2nd Place -->
        <div class="text-center">
          <div class="bg-white rounded-2xl p-6 border border-neutral-200 shadow-soft transform hover:scale-105 transition-transform">
            <div class="text-6xl mb-4">🥈</div>
            <div class="w-24 h-24 mx-auto mb-4 rounded-full bg-gradient-to-br from-neutral-300 to-neutral-400 flex items-center justify-center text-3xl font-bold text-white">
              {topUsers[1].user.name.charAt(0)}
            </div>
            <h3 class="text-xl font-bold text-neutral-800 mb-1">{topUsers[1].user.name}</h3>
            <p class="text-3xl font-black text-primary-600 mb-2">{topUsers[1].totalPoints.toLocaleString()}</p>
            <p class="text-sm text-neutral-600">{topUsers[1].projectCount} projets</p>
          </div>
        </div>
        
        <!-- 1st Place -->
        <div class="text-center -mt-8">
          <div class="relative">
            <div class="bg-white rounded-2xl p-8 border-2 border-accent-400 shadow-soft-lg transform hover:scale-105 transition-transform">
              <div class="text-7xl mb-4">🥇</div>
              <div class="w-32 h-32 mx-auto mb-4 rounded-full bg-gradient-to-br from-accent-400 to-accent-600 flex items-center justify-center text-4xl font-bold text-white shadow-soft">
                {topUsers[0].user.name.charAt(0)}
              </div>
              <h3 class="text-2xl font-bold text-neutral-800 mb-1">{topUsers[0].user.name}</h3>
              <p class="text-4xl font-black text-accent-600 mb-2">{topUsers[0].totalPoints.toLocaleString()}</p>
              <p class="text-sm text-neutral-600">{topUsers[0].projectCount} projets</p>
              <div class="mt-4 flex justify-center gap-1">
                {topUsers[0].badges.slice(0, 4).map((badge) => (
                  <span class="text-2xl">{badge}</span>
                ))}
              </div>
            </div>
          </div>
        </div>
        
        <!-- 3rd Place -->
        <div class="text-center">
          <div class="bg-white rounded-2xl p-6 border border-neutral-200 shadow-soft transform hover:scale-105 transition-transform">
            <div class="text-6xl mb-4">🥉</div>
            <div class="w-24 h-24 mx-auto mb-4 rounded-full bg-gradient-to-br from-orange-300 to-orange-400 flex items-center justify-center text-3xl font-bold text-white">
              {topUsers[2].user.name.charAt(0)}
            </div>
            <h3 class="text-xl font-bold text-neutral-800 mb-1">{topUsers[2].user.name}</h3>
            <p class="text-3xl font-black text-accent-500 mb-2">{topUsers[2].totalPoints.toLocaleString()}</p>
            <p class="text-sm text-neutral-600">{topUsers[2].projectCount} projets</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Full Leaderboard -->
  <section class="py-16 bg-neutral-50">
    <div class="max-w-7xl mx-auto px-6">
      <div class="grid lg:grid-cols-12 gap-8">
        <!-- Main Leaderboard -->
        <div class="lg:col-span-8">
          <div class="bg-white rounded-3xl border border-neutral-200 shadow-soft overflow-hidden">
            <div class="p-6 border-b border-neutral-200">
              <h2 class="text-2xl font-bold text-neutral-800">Top 100 Créateurs</h2>
            </div>
            
            <div class="divide-y divide-neutral-200">
              {topUsers.slice(3).map((user, index) => (
                <div class="p-6 hover:bg-neutral-50 transition-colors">
                  <div class="flex items-center gap-6">
                    <!-- Position -->
                    <div class="text-center">
                      <div class="text-2xl font-bold text-neutral-500">#{user.position}</div>
                      {user.trend === 'up' && <span class="text-primary-500 text-xs">▲</span>}
                      {user.trend === 'down' && <span class="text-red-500 text-xs">▼</span>}
                      {user.trend === 'stable' && <span class="text-neutral-400 text-xs">-</span>}
                    </div>
                    
                    <!-- Avatar -->
                    <div class="w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center font-bold text-lg text-white">
                      {user.user.name.charAt(0)}
                    </div>
                    
                    <!-- User Info -->
                    <div class="flex-1">
                      <h3 class="text-lg font-semibold text-neutral-800">{user.user.name}</h3>
                      <div class="flex items-center gap-4 text-sm text-neutral-600">
                        <span>{user.projectCount} projets</span>
                        <span>•</span>
                        <span>Actif {user.recentActivity}</span>
                      </div>
                    </div>
                    
                    <!-- Badges -->
                    <div class="hidden md:flex gap-1">
                      {user.badges.map((badge) => (
                        <span class="text-xl">{badge}</span>
                      ))}
                    </div>
                    
                    <!-- Points -->
                    <div class="text-right">
                      <div class="text-2xl font-bold text-primary-600">{user.totalPoints.toLocaleString()}</div>
                      <div class="text-xs text-primary-500">+{user.monthlyGain} ce mois</div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
            
            <!-- Load More -->
            <div class="p-6 text-center border-t border-neutral-200">
              <button class="px-6 py-3 rounded-full bg-white border border-neutral-200 text-neutral-700 hover:bg-neutral-50 transition-all">
                Charger plus
              </button>
            </div>
          </div>
        </div>
        
        <!-- Sidebar -->
        <div class="lg:col-span-4 space-y-8">
          <!-- Your Rank -->
          <div class="bg-white rounded-2xl p-6 border border-neutral-200 shadow-soft">
            <h3 class="text-xl font-bold text-neutral-800 mb-4">Votre position</h3>
            <div class="text-center py-6">
              <div class="text-5xl font-black text-primary-600 mb-2">#42</div>
              <p class="text-neutral-600 mb-4">Vous êtes dans le top 5%!</p>
              <div class="space-y-2">
                <div class="flex justify-between text-sm">
                  <span class="text-neutral-600">Points totaux</span>
                  <span class="text-neutral-800 font-semibold">3,450</span>
                </div>
                <div class="flex justify-between text-sm">
                  <span class="text-neutral-600">Ce mois</span>
                  <span class="text-primary-600 font-semibold">+680</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Achievements Showcase -->
          <div class="bg-white rounded-2xl p-6 border border-neutral-200 shadow-soft">
            <h3 class="text-xl font-bold text-neutral-800 mb-4">Achievements rares</h3>
            <div class="space-y-4">
              {achievements.map((achievement) => (
                <div class="flex items-start gap-3">
                  <span class="text-3xl">{achievement.icon}</span>
                  <div class="flex-1">
                    <h4 class="font-semibold text-neutral-800">{achievement.name}</h4>
                    <p class="text-xs text-neutral-600">{achievement.description}</p>
                    <span class={`inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium ${
                      achievement.rarity === 'Légendaire' ? 'bg-accent-100 text-accent-700' :
                      achievement.rarity === 'Épique' ? 'bg-primary-100 text-primary-700' :
                      'bg-neutral-100 text-neutral-700'
                    }`}>
                      {achievement.rarity}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>
          
          <!-- Stats Overview -->
          <div class="bg-white rounded-2xl p-6 border border-neutral-200 shadow-soft">
            <h3 class="text-xl font-bold text-neutral-800 mb-4">Statistiques globales</h3>
            <div class="space-y-4">
              <div>
                <div class="flex justify-between mb-2">
                  <span class="text-sm text-neutral-600">Utilisateurs actifs</span>
                  <span class="text-sm font-semibold text-neutral-800">2,847</span>
                </div>
                <div class="h-2 bg-neutral-200 rounded-full overflow-hidden">
                  <div class="h-full bg-primary-500 rounded-full" style="width: 78%"></div>
                </div>
              </div>
              
              <div>
                <div class="flex justify-between mb-2">
                  <span class="text-sm text-neutral-600">Points distribués ce mois</span>
                  <span class="text-sm font-semibold text-neutral-800">145,230</span>
                </div>
                <div class="h-2 bg-neutral-200 rounded-full overflow-hidden">
                  <div class="h-full bg-accent-500 rounded-full" style="width: 65%"></div>
                </div>
              </div>
              
              <div>
                <div class="flex justify-between mb-2">
                  <span class="text-sm text-neutral-600">Nouveaux projets</span>
                  <span class="text-sm font-semibold text-neutral-800">342</span>
                </div>
                <div class="h-2 bg-neutral-200 rounded-full overflow-hidden">
                  <div class="h-full bg-primary-500 rounded-full" style="width: 85%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
</style>