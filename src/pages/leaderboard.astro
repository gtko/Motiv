---
import Layout from '../layouts/Layout.astro';
import Leaderboard from '../components/Leaderboard';

const topUsers = [
  {
    position: 1,
    user: { id: '1', name: 'Marie Dubois', avatar: null },
    totalPoints: 12850,
    projectCount: 15,
    trend: 'up' as const,
    badges: ['🏆', '⚡', '🎯', '🔥'],
    recentActivity: '2 heures',
    monthlyGain: 2340
  },
  {
    position: 2,
    user: { id: '2', name: 'Jean Martin', avatar: null },
    totalPoints: 11340,
    projectCount: 12,
    trend: 'stable' as const,
    badges: ['💎', '🚀', '⭐'],
    recentActivity: '5 heures',
    monthlyGain: 1890
  },
  {
    position: 3,
    user: { id: '3', name: 'Sophie Bernard', avatar: null },
    totalPoints: 10890,
    projectCount: 14,
    trend: 'up' as const,
    badges: ['🎨', '💡', '🏅'],
    recentActivity: '1 jour',
    monthlyGain: 3210
  },
  {
    position: 4,
    user: { id: '4', name: 'Thomas Petit', avatar: null },
    totalPoints: 9560,
    projectCount: 10,
    trend: 'down' as const,
    badges: ['🛠️', '📈'],
    recentActivity: '3 jours',
    monthlyGain: 980
  },
  {
    position: 5,
    user: { id: '5', name: 'Emma Rousseau', avatar: null },
    totalPoints: 8230,
    projectCount: 11,
    trend: 'up' as const,
    badges: ['🌟', '🎯', '💪'],
    recentActivity: '6 heures',
    monthlyGain: 2100
  },
  {
    position: 6,
    user: { id: '6', name: 'Lucas Moreau', avatar: null },
    totalPoints: 7890,
    projectCount: 9,
    trend: 'up' as const,
    badges: ['🚀', '⚡'],
    recentActivity: '2 jours',
    monthlyGain: 1650
  },
  {
    position: 7,
    user: { id: '7', name: 'Léa Garcia', avatar: null },
    totalPoints: 7120,
    projectCount: 8,
    trend: 'stable' as const,
    badges: ['🎨', '💎'],
    recentActivity: '12 heures',
    monthlyGain: 1200
  },
  {
    position: 8,
    user: { id: '8', name: 'Antoine Lefebvre', avatar: null },
    totalPoints: 6540,
    projectCount: 7,
    trend: 'down' as const,
    badges: ['📈'],
    recentActivity: '4 jours',
    monthlyGain: 450
  },
  {
    position: 9,
    user: { id: '9', name: 'Camille Dupont', avatar: null },
    totalPoints: 5980,
    projectCount: 8,
    trend: 'up' as const,
    badges: ['🌟', '🏅'],
    recentActivity: '1 jour',
    monthlyGain: 1780
  },
  {
    position: 10,
    user: { id: '10', name: 'Maxime Robert', avatar: null },
    totalPoints: 5230,
    projectCount: 6,
    trend: 'stable' as const,
    badges: ['💡'],
    recentActivity: '3 heures',
    monthlyGain: 890
  }
];

const categories = [
  { name: 'Global', icon: '🌍', active: true },
  { name: 'Mensuel', icon: '📅', active: false },
  { name: 'Hebdomadaire', icon: '📊', active: false },
  { name: 'Projets SaaS', icon: '💼', active: false },
  { name: 'Jeux', icon: '🎮', active: false },
  { name: 'Open Source', icon: '🔓', active: false }
];

const achievements = [
  { name: 'First Place', icon: '🥇', description: 'Finir 1er du classement global', rarity: 'Légendaire' },
  { name: 'Streak Master', icon: '🔥', description: '30 jours d\'activité consécutive', rarity: 'Épique' },
  { name: 'Project Champion', icon: '🏆', description: '10 projets avec +1000 points', rarity: 'Épique' },
  { name: 'Community Hero', icon: '🦸', description: 'Aider 50 autres créateurs', rarity: 'Rare' }
];
---

<Layout title="Classement">
  <!-- Hero Section - Hall of Fame Élégant -->
  <section class="relative min-h-[50vh] flex items-center justify-center overflow-hidden">
    
    <!-- Background Image -->
    <div class="absolute inset-0 z-0">
      <img 
        src="/assets/illustrations/classement-w1280.png" 
        alt="Classement background" 
        class="w-full h-full object-cover"
        loading="eager"
      />
      <!-- Dark overlay for better text contrast -->
      <div class="absolute inset-0 bg-gradient-to-b from-neutral-900/70 via-neutral-800/60 to-neutral-700/50"></div>
    </div>
    
    <!-- Étoiles subtiles -->
    <div class="absolute inset-0 opacity-60 z-10">
      <div class="absolute top-16 left-16 w-1 h-1 bg-white rounded-full opacity-80"></div>
      <div class="absolute top-28 right-24 w-1 h-1 bg-primary-300 rounded-full opacity-60"></div>
      <div class="absolute bottom-24 left-32 w-1 h-1 bg-accent-400 rounded-full opacity-70"></div>
      <div class="absolute bottom-16 right-20 w-1 h-1 bg-white rounded-full opacity-50"></div>
    </div>
    
    <div class="relative z-10 max-w-4xl mx-auto px-8 text-center">
      <!-- Badge simple -->
      <div class="mb-6">
        <span class="inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-full text-sm font-medium text-white/90">
          🏆 Classement
        </span>
      </div>
      
      <!-- Titre élégant -->
      <h1 class="text-4xl md:text-5xl lg:text-6xl font-black mb-4 text-white">
        Top Créateurs
      </h1>
      
      <!-- Sous-titre simple -->
      <p class="text-lg md:text-xl text-neutral-300 max-w-2xl mx-auto">
        Découvrez les entrepreneurs qui se démarquent dans notre communauté
      </p>
    </div>
  </section>

  <!-- Categories Tabs -->
  <section class="py-8 sticky top-20 z-40 bg-white/90 backdrop-blur-sm border-b border-neutral-200">
    <div class="max-w-7xl mx-auto px-6">
      <div class="flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide">
        {categories.map((category) => (
          <button class={`flex items-center gap-2 px-6 py-3 rounded-full text-sm font-medium whitespace-nowrap transition-all ${
            category.active 
              ? 'bg-primary-500 text-white shadow-soft' 
              : 'bg-white border border-neutral-200 text-neutral-600 hover:bg-neutral-50'
          }`}>
            <span class="text-lg">{category.icon}</span>
            {category.name}
          </button>
        ))}
      </div>
    </div>
  </section>

  <!-- Podium Élégant -->
  <section class="py-16 -mt-8 bg-gradient-to-b from-white to-neutral-50">
    <div class="max-w-6xl mx-auto px-8">
      
      <!-- Titre simple -->
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-neutral-800 mb-3">
          Top 3 de la Semaine
        </h2>
        <p class="text-neutral-600">
          Les créateurs qui se distinguent cette semaine
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-end max-w-4xl mx-auto">
        
        <!-- 2ème Place -->
        <div class="text-center">
          <div class="bg-white rounded-2xl p-6 border border-neutral-200 shadow-soft hover:shadow-soft-lg transition-all">
            <!-- Illustration avec masque -->
            <div class="relative mb-4">
              <div class="w-16 h-16 mx-auto relative">
                <img 
                  src="/assets/illustrations/astronaute_et_cristal-w600.png" 
                  alt="" 
                  class="w-full h-full object-contain"
                  style="
                    mask: radial-gradient(circle at center, rgba(0,0,0,0.8) 30%, rgba(0,0,0,0.4) 70%, rgba(0,0,0,0.1) 100%);
                    -webkit-mask: radial-gradient(circle at center, rgba(0,0,0,0.8) 30%, rgba(0,0,0,0.4) 70%, rgba(0,0,0,0.1) 100%);
                  "
                  loading="lazy"
                />
              </div>
              <div class="absolute -top-1 -right-1 text-2xl">🥈</div>
            </div>
            
            <!-- Avatar -->
            <div class="w-16 h-16 mx-auto mb-3 rounded-full bg-gradient-to-br from-neutral-400 to-neutral-500 flex items-center justify-center text-xl font-bold text-white">
              {topUsers[1].user.name.charAt(0)}
            </div>
            
            <!-- Info -->
            <h3 class="font-bold text-neutral-800 mb-1">{topUsers[1].user.name}</h3>
            <p class="text-2xl font-black text-neutral-600 mb-1">{topUsers[1].totalPoints.toLocaleString()}</p>
            <p class="text-sm text-neutral-500">{topUsers[1].projectCount} projets</p>
            
            <!-- Badges simples -->
            <div class="mt-3 flex justify-center gap-1">
              {topUsers[1].badges.slice(0, 3).map((badge) => (
                <span class="text-sm">{badge}</span>
              ))}
            </div>
          </div>
        </div>
        
        <!-- 1ère Place -->
        <div class="text-center md:-mt-6">
          <div class="bg-white rounded-2xl p-8 border-2 border-primary-200 shadow-soft-lg relative">
            <!-- Badge champion -->
            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
              <span class="bg-primary-500 text-white px-3 py-1 rounded-full text-xs font-bold">
                🏆 Champion
              </span>
            </div>
            
            <!-- Illustration avec masque -->
            <div class="relative mb-6">
              <div class="w-20 h-20 mx-auto relative">
                <img 
                  src="/assets/illustrations/explorateurs_drapeau_vert_astéroïde-w600.png" 
                  alt="" 
                  class="w-full h-full object-contain"
                  style="
                    mask: radial-gradient(circle at center, rgba(0,0,0,0.9) 20%, rgba(0,0,0,0.6) 60%, rgba(0,0,0,0.2) 100%);
                    -webkit-mask: radial-gradient(circle at center, rgba(0,0,0,0.9) 20%, rgba(0,0,0,0.6) 60%, rgba(0,0,0,0.2) 100%);
                  "
                  loading="lazy"
                />
              </div>
              <div class="absolute -top-2 -right-2 text-3xl">👑</div>
            </div>
            
            <!-- Avatar champion -->
            <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-2xl font-bold text-white shadow-soft">
              {topUsers[0].user.name.charAt(0)}
            </div>
            
            <!-- Info champion -->
            <h3 class="text-xl font-bold text-neutral-800 mb-2">{topUsers[0].user.name}</h3>
            <p class="text-3xl font-black text-primary-600 mb-2">{topUsers[0].totalPoints.toLocaleString()}</p>
            <p class="text-sm text-neutral-600 mb-4">{topUsers[0].projectCount} projets</p>
            
            <!-- Badges champion -->
            <div class="flex justify-center gap-1 bg-primary-50 rounded-lg p-2">
              {topUsers[0].badges.slice(0, 4).map((badge) => (
                <span class="text-lg">{badge}</span>
              ))}
            </div>
          </div>
        </div>
        
        <!-- 3ème Place -->
        <div class="text-center">
          <div class="bg-white rounded-2xl p-6 border border-neutral-200 shadow-soft hover:shadow-soft-lg transition-all">
            <!-- Illustration avec masque -->
            <div class="relative mb-4">
              <div class="w-16 h-16 mx-auto relative">
                <img 
                  src="/assets/illustrations/deux_micro-fusees.png" 
                  alt="" 
                  class="w-full h-full object-contain"
                  style="
                    mask: radial-gradient(circle at center, rgba(0,0,0,0.8) 30%, rgba(0,0,0,0.4) 70%, rgba(0,0,0,0.1) 100%);
                    -webkit-mask: radial-gradient(circle at center, rgba(0,0,0,0.8) 30%, rgba(0,0,0,0.4) 70%, rgba(0,0,0,0.1) 100%);
                  "
                  loading="lazy"
                />
              </div>
              <div class="absolute -top-1 -right-1 text-2xl">🥉</div>
            </div>
            
            <!-- Avatar -->
            <div class="w-16 h-16 mx-auto mb-3 rounded-full bg-gradient-to-br from-orange-400 to-orange-500 flex items-center justify-center text-xl font-bold text-white">
              {topUsers[2].user.name.charAt(0)}
            </div>
            
            <!-- Info -->
            <h3 class="font-bold text-neutral-800 mb-1">{topUsers[2].user.name}</h3>
            <p class="text-2xl font-black text-orange-600 mb-1">{topUsers[2].totalPoints.toLocaleString()}</p>
            <p class="text-sm text-neutral-500">{topUsers[2].projectCount} projets</p>
            
            <!-- Badges simples -->
            <div class="mt-3 flex justify-center gap-1">
              {topUsers[2].badges.slice(0, 3).map((badge) => (
                <span class="text-sm">{badge}</span>
              ))}
            </div>
          </div>
        </div>
        
      </div>
      
      <!-- CTA simple -->
      <div class="text-center mt-12">
        <div class="bg-neutral-50 rounded-xl p-6 border border-neutral-200 max-w-md mx-auto">
          <p class="text-neutral-700 mb-4">
            Envie de rejoindre le podium ?
          </p>
          <a href="/register" class="inline-flex items-center gap-2 px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-semibold rounded-full transition-colors">
            <span>🚀</span>
            Commencer
          </a>
        </div>
      </div>
      
    </div>
  </section>

  <!-- Full Leaderboard -->
  <section class="py-16 bg-neutral-50">
    <div class="max-w-7xl mx-auto px-6">
      <div class="grid lg:grid-cols-12 gap-8">
        <!-- Main Leaderboard -->
        <div class="lg:col-span-8">
          <div class="bg-white rounded-3xl border border-neutral-200 shadow-soft overflow-hidden">
            <div class="p-6 border-b border-neutral-200">
              <h2 class="text-2xl font-bold text-neutral-800">Top 100 Créateurs</h2>
            </div>
            
            <div class="divide-y divide-neutral-200">
              {topUsers.slice(3).map((user, index) => (
                <div class="p-6 hover:bg-neutral-50 transition-colors">
                  <div class="flex items-center gap-6">
                    <!-- Position -->
                    <div class="text-center">
                      <div class="text-2xl font-bold text-neutral-500">#{user.position}</div>
                      {user.trend === 'up' && <span class="text-primary-500 text-xs">▲</span>}
                      {user.trend === 'down' && <span class="text-red-500 text-xs">▼</span>}
                      {user.trend === 'stable' && <span class="text-neutral-400 text-xs">-</span>}
                    </div>
                    
                    <!-- Avatar -->
                    <div class="w-12 h-12 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center font-bold text-lg text-white">
                      {user.user.name.charAt(0)}
                    </div>
                    
                    <!-- User Info -->
                    <div class="flex-1">
                      <h3 class="text-lg font-semibold text-neutral-800">{user.user.name}</h3>
                      <div class="flex items-center gap-4 text-sm text-neutral-600">
                        <span>{user.projectCount} projets</span>
                        <span>•</span>
                        <span>Actif {user.recentActivity}</span>
                      </div>
                    </div>
                    
                    <!-- Badges -->
                    <div class="hidden md:flex gap-1">
                      {user.badges.map((badge) => (
                        <span class="text-xl">{badge}</span>
                      ))}
                    </div>
                    
                    <!-- Points -->
                    <div class="text-right">
                      <div class="text-2xl font-bold text-primary-600">{user.totalPoints.toLocaleString()}</div>
                      <div class="text-xs text-primary-500">+{user.monthlyGain} ce mois</div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
            
            <!-- Load More -->
            <div class="p-6 text-center border-t border-neutral-200">
              <button class="px-6 py-3 rounded-full bg-white border border-neutral-200 text-neutral-700 hover:bg-neutral-50 transition-all">
                Charger plus
              </button>
            </div>
          </div>
        </div>
        
        <!-- Sidebar -->
        <div class="lg:col-span-4 space-y-8">
          <!-- Your Rank -->
          <div class="bg-white rounded-2xl p-6 border border-neutral-200 shadow-soft">
            <h3 class="text-xl font-bold text-neutral-800 mb-4">Votre position</h3>
            <div class="text-center py-6">
              <div class="text-5xl font-black text-primary-600 mb-2">#42</div>
              <p class="text-neutral-600 mb-4">Vous êtes dans le top 5%!</p>
              <div class="space-y-2">
                <div class="flex justify-between text-sm">
                  <span class="text-neutral-600">Points totaux</span>
                  <span class="text-neutral-800 font-semibold">3,450</span>
                </div>
                <div class="flex justify-between text-sm">
                  <span class="text-neutral-600">Ce mois</span>
                  <span class="text-primary-600 font-semibold">+680</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Achievements Showcase -->
          <div class="bg-white rounded-2xl p-6 border border-neutral-200 shadow-soft">
            <h3 class="text-xl font-bold text-neutral-800 mb-4">Achievements rares</h3>
            <div class="space-y-4">
              {achievements.map((achievement) => (
                <div class="flex items-start gap-3">
                  <span class="text-3xl">{achievement.icon}</span>
                  <div class="flex-1">
                    <h4 class="font-semibold text-neutral-800">{achievement.name}</h4>
                    <p class="text-xs text-neutral-600">{achievement.description}</p>
                    <span class={`inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium ${
                      achievement.rarity === 'Légendaire' ? 'bg-accent-100 text-accent-700' :
                      achievement.rarity === 'Épique' ? 'bg-primary-100 text-primary-700' :
                      'bg-neutral-100 text-neutral-700'
                    }`}>
                      {achievement.rarity}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          </div>
          
          <!-- Stats Overview -->
          <div class="bg-white rounded-2xl p-6 border border-neutral-200 shadow-soft">
            <h3 class="text-xl font-bold text-neutral-800 mb-4">Statistiques globales</h3>
            <div class="space-y-4">
              <div>
                <div class="flex justify-between mb-2">
                  <span class="text-sm text-neutral-600">Utilisateurs actifs</span>
                  <span class="text-sm font-semibold text-neutral-800">2,847</span>
                </div>
                <div class="h-2 bg-neutral-200 rounded-full overflow-hidden">
                  <div class="h-full bg-primary-500 rounded-full" style="width: 78%"></div>
                </div>
              </div>
              
              <div>
                <div class="flex justify-between mb-2">
                  <span class="text-sm text-neutral-600">Points distribués ce mois</span>
                  <span class="text-sm font-semibold text-neutral-800">145,230</span>
                </div>
                <div class="h-2 bg-neutral-200 rounded-full overflow-hidden">
                  <div class="h-full bg-accent-500 rounded-full" style="width: 65%"></div>
                </div>
              </div>
              
              <div>
                <div class="flex justify-between mb-2">
                  <span class="text-sm text-neutral-600">Nouveaux projets</span>
                  <span class="text-sm font-semibold text-neutral-800">342</span>
                </div>
                <div class="h-2 bg-neutral-200 rounded-full overflow-hidden">
                  <div class="h-full bg-primary-500 rounded-full" style="width: 85%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
</style>